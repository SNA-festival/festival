{"changed":true,"filter":false,"title":"views.py","tooltip":"/minimal-django-file-upload-example/src/for_django_1-6/myproject/myproject/myapp/views.py","value":"# -*- coding: utf-8 -*-\nfrom django.shortcuts import render_to_response\n\nfrom django.http import HttpResponseRedirect\n\nfrom django.core.urlresolvers import reverse\n\nfrom django.template import RequestContext\nfrom myproject.myapp.models import Document\nfrom myproject.myapp.forms import DocumentForm\n\ndef list(request):\n    # Handle file upload\n    if request.method == 'POST':\n        form = DocumentForm(request.POST, request.FILES)\n        if form.is_valid():\n            newdoc = Document(docfile = request.FILES['docfile'])\n            newdoc.save()\n\n            # Redirect to the document list after POST\n            return HttpResponseRedirect(reverse('myproject.myapp.views.list'))\n    else:\n        form = DocumentForm() # A empty, unbound form\n\n    # Load documents for the list page\n    documents = Document.objects.all()\n\n    # Render list page with the documents and the form\n    return render_to_response(\n        'myapp/list.html',\n        {'documents': documents, 'form': form},\n        context_instance=RequestContext(request)\n    )\n","undoManager":{"mark":-1,"position":2,"stack":[[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":2,"column":42},"action":"remove","lines":["from django.template import RequestContext"]},{"start":{"row":5,"column":0},"end":{"row":5,"column":42},"action":"insert","lines":["from django.template import RequestContext"]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":44},"end":{"row":4,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":44},"end":{"row":6,"column":0},"action":"insert","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":300,"scrollleft":0,"selection":{"start":{"row":3,"column":0},"end":{"row":3,"column":44},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":19,"state":"start","mode":"ace/mode/python"}},"timestamp":1419860221658}